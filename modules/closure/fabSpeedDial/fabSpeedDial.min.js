/*!
 * AngularJS Material Design
 * https://github.com/angular/material
 * @license MIT
 * v1.1.4-master-2773469
 */
goog.provide("ngmaterial.components.fabShared"),goog.require("ngmaterial.core"),function(){"use strict";function n(n,e,t,i,a,o,r){function c(){k.direction=k.direction||"down",k.isOpen=k.isOpen||!1,u(),e.addClass("md-animations-waiting")}function l(){var t=["click","focusin","focusout"];angular.forEach(t,function(n){e.on(n,s)}),n.$on("$destroy",function(){angular.forEach(t,function(n){e.off(n,s)}),g()})}function s(n){"click"==n.type&&x(n),"focusout"!=n.type||F||(F=o(function(){k.close()},100,!1)),"focusin"==n.type&&F&&(o.cancel(F),F=null)}function u(){k.currentActionIndex=-1}function d(){n.$watch("vm.direction",function(n,i){t.removeClass(e,"md-"+i),t.addClass(e,"md-"+n),u()});var i,a;n.$watch("vm.isOpen",function(n){u(),i&&a||(i=I(),a=D()),n?m():g();var o=n?"md-is-open":"",r=n?"":"md-is-open";i.attr("aria-haspopup",!0),i.attr("aria-expanded",n),a.attr("aria-hidden",!n),t.setClass(e,o,r)})}function f(){e[0].scrollHeight>0?t.addClass(e,"_md-animations-ready").then(function(){e.removeClass("md-animations-waiting")}):_<10&&(o(f,100),_+=1)}function m(){e.on("keydown",h),i.nextTick(function(){r.on("click touchend",p)})}function g(){e.off("keydown",h),r.off("click touchend",p)}function p(n){if(n.target){var e=i.getClosest(n.target,"md-fab-trigger"),t=i.getClosest(n.target,"md-fab-actions");e||t||k.close()}}function h(n){switch(n.which){case a.KEY_CODE.ESCAPE:return k.close(),n.preventDefault(),!1;case a.KEY_CODE.LEFT_ARROW:return A(n),!1;case a.KEY_CODE.UP_ARROW:return O(n),!1;case a.KEY_CODE.RIGHT_ARROW:return $(n),!1;case a.KEY_CODE.DOWN_ARROW:return S(n),!1}}function v(n){C(n,-1)}function b(n){C(n,1)}function C(n,e){var t=y();k.currentActionIndex=k.currentActionIndex+e,k.currentActionIndex=Math.min(t.length-1,k.currentActionIndex),k.currentActionIndex=Math.max(0,k.currentActionIndex);var i=angular.element(t[k.currentActionIndex]).children()[0];angular.element(i).attr("tabindex",0),i.focus(),n.preventDefault(),n.stopImmediatePropagation()}function y(){var n=D()[0].querySelectorAll(".md-fab-action-item");return angular.forEach(n,function(n){angular.element(angular.element(n).children()[0]).attr("tabindex",-1)}),n}function A(n){"left"===k.direction?b(n):v(n)}function O(n){"down"===k.direction?v(n):b(n)}function $(n){"left"===k.direction?v(n):b(n)}function S(n){"up"===k.direction?v(n):b(n)}function w(n){return i.getClosest(n,"md-fab-trigger")}function E(n){return i.getClosest(n,"md-fab-actions")}function x(n){w(n.target)&&k.toggle(),E(n.target)&&k.close()}function I(){return e.find("md-fab-trigger")}function D(){return e.find("md-fab-actions")}var k=this,_=0;k.open=function(){n.$evalAsync("vm.isOpen = true")},k.close=function(){n.$evalAsync("vm.isOpen = false"),e.find("md-fab-trigger")[0].focus()},k.toggle=function(){n.$evalAsync("vm.isOpen = !vm.isOpen")},k.$onInit=function(){c(),l(),d(),f()},1===angular.version.major&&angular.version.minor<=4&&this.$onInit();var F}n.$inject=["$scope","$element","$animate","$mdUtil","$mdConstant","$timeout","$document"],angular.module("material.components.fabShared",["material.core"]).controller("MdFabController",n)}(),function(){"use strict";function n(){function n(n,e){e.prepend('<div class="_md-css-variables"></div>')}return{restrict:"E",scope:{direction:"@?mdDirection",isOpen:"=?mdOpen"},bindToController:!0,controller:"MdFabController",controllerAs:"vm",link:n}}function e(n,e){function t(e){n(e,i,!1)}function a(n){if(!n.hasClass("md-animations-waiting")||n.hasClass("_md-animations-ready")){var t=n[0],i=n.controller("mdFabSpeedDial"),a=t.querySelectorAll(".md-fab-action-item"),o=t.querySelector("md-fab-trigger"),r=t.querySelector("._md-css-variables"),c=parseInt(e.getComputedStyle(r).zIndex);angular.forEach(a,function(n,e){var t=n.style;t.transform=t.webkitTransform="",t.transitionDelay="",t.opacity=1,t.zIndex=a.length-e+c}),o.style.zIndex=c+a.length+1,i.isOpen||angular.forEach(a,function(n,e){var t,a,r=n.style,c=(o.clientHeight-n.clientHeight)/2,l=(o.clientWidth-n.clientWidth)/2;switch(i.direction){case"up":t=n.scrollHeight*(e+1)+c,a="Y";break;case"down":t=-(n.scrollHeight*(e+1)+c),a="Y";break;case"left":t=n.scrollWidth*(e+1)+l,a="X";break;case"right":t=-(n.scrollWidth*(e+1)+l),a="X"}var s="translate"+a+"("+t+"px)";r.transform=r.webkitTransform=s})}}return{addClass:function(n,e,i){n.hasClass("md-fling")?(a(n),t(i)):i()},removeClass:function(n,e,i){a(n),t(i)}}}function t(n,e){function t(e){n(e,i,!1)}function a(n){var t=n[0],i=n.controller("mdFabSpeedDial"),a=t.querySelectorAll(".md-fab-action-item"),r=t.querySelector("._md-css-variables"),c=parseInt(e.getComputedStyle(r).zIndex);angular.forEach(a,function(n,e){var t=n.style,r=e*o;t.opacity=i.isOpen?1:0,t.transform=t.webkitTransform=i.isOpen?"scale(1)":"scale(0)",t.transitionDelay=(i.isOpen?r:a.length-r)+"ms",t.zIndex=a.length-e+c})}var o=65;return{addClass:function(n,e,i){a(n),t(i)},removeClass:function(n,e,i){a(n),t(i)}}}e.$inject=["$timeout","$window"],t.$inject=["$timeout","$window"];var i=300;angular.module("material.components.fabSpeedDial",["material.core","material.components.fabShared","material.components.fabActions"]).directive("mdFabSpeedDial",n).animation(".md-fling",e).animation(".md-scale",t).service("mdFabSpeedDialFlingAnimation",e).service("mdFabSpeedDialScaleAnimation",t)}(),ngmaterial.components.fabShared=angular.module("material.components.fabShared");